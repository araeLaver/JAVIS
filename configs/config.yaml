# JAVIS Configuration

app:
  name: JAVIS
  version: "0.1.0"
  description: "Personal AI Assistant"

model:
  # RunPod Serverless Endpoint
  provider: runpod
  # endpoint_id는 .env에서 로드

  # 베이스 모델 정보
  base_model: "Qwen/Qwen2.5-7B-Instruct"
  adapter: null  # LoRA 어댑터 경로 (파인튜닝 후 설정)

  # 생성 파라미터
  generation:
    max_tokens: 2048
    temperature: 0.7
    top_p: 0.9
    stop_sequences: ["<|im_end|>", "<|endoftext|>"]

conversation:
  # 시스템 프롬프트
  system_prompt: |
    너는 JAVIS, 개발자를 위한 개인 AI 비서다.

    핵심 원칙:
    - 간결하고 정확하게 답변한다
    - 필요할 때 도구를 사용한다
    - 불확실한 것은 솔직히 말한다
    - 한국어로 답변한다

  # 대화 히스토리 최대 길이
  max_history: 20

  # 컨텍스트 윈도우
  max_context_tokens: 8000

tools:
  enabled: false  # Phase 3에서 활성화
  available:
    - file_tools
    - shell_tools
    - web_tools
    - system_tools

memory:
  short_term:
    enabled: true
    max_messages: 50

  long_term:
    enabled: false  # Phase 4에서 활성화
    db_path: "./data/vectors"
    embedding_model: "sentence-transformers/all-MiniLM-L6-v2"

rag:
  enabled: false  # Phase 4에서 활성화
  chunk_size: 500
  chunk_overlap: 50
  top_k: 5

logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/javis.log"

# 자동 재학습 파이프라인 설정
training:
  # 스케줄러 설정
  schedule:
    enabled: true
    cron: "0 0 * * 0"  # 매주 일요일 자정
    timezone: "Asia/Seoul"

  # 학습 환경: modal, local
  provider: "modal"

  # 데이터 조건
  data:
    min_conversations: 2       # 최소 대화 수 (테스트용)
    min_good_feedback: 0       # 최소 좋은 피드백 수 (테스트용)
    exclude_bad_feedback: true # 나쁜 피드백 제외
    max_age_days: 90           # 90일 이상 된 데이터 제외

  # 학습 하이퍼파라미터
  model:
    base_model: "Qwen/Qwen2.5-7B-Instruct"
    epochs: 1               # 테스트용 1 에폭
    batch_size: 2           # Modal A10G용
    learning_rate: 0.0002
    lora_r: 64
    lora_alpha: 16
    max_seq_length: 1024
    gradient_accumulation_steps: 4

  # 배포 설정
  deployment:
    auto_deploy: true          # 학습 완료 후 자동 배포
    validation_required: true  # 배포 전 검증 필수
    keep_versions: 5           # 보관할 버전 수

  # 알림 설정
  notifications:
    discord_webhook: null      # Discord 웹훅 URL
    on_success: true
    on_failure: true
